function [s1_TI_TE_xy,s2_TI_TE_xy] = IR_gen_v3(M0,T1,T2,TR,TI,TE,flip_inv,flip_ex,flip_ref,inveff,kap,dw)
%IR_GEN_V3
%    [S1_TI_TE_XY,S2_TI_TE_XY] = IR_GEN_V3(M0,T1,T2,TR,TI,TE,FLIP_INV,FLIP_EX,FLIP_REF,INVEFF,KAP,DW)

%    This function was generated by the Symbolic Math Toolbox version 5.10.
%    26-Jun-2016 14:20:39

t2 = 1.0./T2;
t3 = 1.0./T1;
t4 = TE.*t2;
t5 = exp(t4);
t13 = flip_inv.*inveff;
t6 = cos(t13);
t15 = flip_ex.*kap;
t7 = cos(t15);
t17 = flip_ref.*kap;
t8 = cos(t17);
t9 = TE+TI-TR;
t10 = t3.*t9.*2.0;
t11 = exp(t10);
t23 = TE.*dw.*(1.0./2.0);
t12 = sin(t23);
t14 = t6.^2;
t16 = sin(t15);
t18 = sin(t17);
t19 = TE.*t3.*2.0;
t20 = exp(t19);
t21 = TI.*t3.*2.0;
t22 = exp(t21);
t24 = cos(t23);
t25 = TE.*t2.*(1.0./2.0);
t26 = exp(t25);
t27 = t24.^2;
t28 = TI.*t3;
t29 = exp(t28);
t30 = t12.^2;
t31 = TE.*t3;
t32 = exp(t31);
t33 = t16.^2;
t34 = t18.^2;
t35 = TE.*t3.*(3.0./2.0);
t36 = exp(t35);
t37 = t8.^2;
t38 = TE.*t3.*(1.0./2.0);
t39 = exp(t38);
t40 = t7.^2;
t41 = t3.*t9;
t42 = exp(t41);
t43 = t5.*t20.*t22;
t44 = t11.*t14.*t30.*t32.*t33.*t34;
t45 = t43+t44-t5.*t11.*t14.*t37.*t40;
t46 = 1.0./t45;
t47 = TE.*2.0;
t48 = TI.*2.0;
t52 = TR.*2.0;
t49 = t47+t48-t52;
t50 = t3.*t49;
t51 = exp(t50);
t53 = TE.*t2.*(3.0./2.0);
t54 = exp(t53);
t55 = M0.*t5.*t12.*t18.*t20.*t22;
t56 = M0.*t16.*t20.*t26.*t27.*t29;
t57 = M0.*t5.*t7.*t12.*t18.*t22.*t36;
t58 = M0.*t6.*t16.*t26.*t27.*t29.*t36.*t42;
t59 = M0.*t5.*t6.*t7.*t12.*t18.*t29.*t36;
t60 = M0.*t5.*t8.*t12.*t14.*t18.*t39.*t40.*t42;
t61 = M0.*t6.*t7.*t8.*t16.*t26.*t27.*t32.*t42;
t62 = M0.*t6.*t8.*t16.*t26.*t27.*t29.*t32.*t42;
t63 = M0.*t5.*t6.*t7.*t8.*t12.*t18.*t29.*t32.*t42;
t64 = M0.*t5.*t6.*t8.*t12.*t18.*t29.*t39.*t40.*t42;
s1_TI_TE_xy = t46.*exp(TE.*t2.*(-1.0./2.0)).*(t55+t56+t57+t58+t59+t60+t61+t62+t63+t64-M0.*t5.*t12.*t18.*t22.*t36-M0.*t16.*t20.*t22.*t26.*t27-M0.*t5.*t7.*t12.*t18.*t29.*t36+M0.*t8.*t16.*t20.*t22.*t26.*t30-M0.*t6.*t16.*t20.*t26.*t27.*t29-M0.*t8.*t16.*t20.*t26.*t29.*t30-M0.*t5.*t8.*t11.*t12.*t14.*t18.*t40+M0.*t6.*t8.*t16.*t20.*t26.*t29.*t30+M0.*t7.*t11.*t14.*t16.*t26.*t27.*t37+M0.*t11.*t12.*t14.*t18.*t27.*t32.*t33+M0.*t6.*t12.*t18.*t27.*t33.*t36.*t42-M0.*t12.*t14.*t18.*t27.*t33.*t36.*t42-M0.*t7.*t8.*t11.*t14.*t16.*t26.*t30.*t34+M0.*t7.*t8.*t11.*t14.*t16.*t26.*t27.*t39-M0.*t7.*t8.*t11.*t14.*t16.*t26.*t30.*t37-M0.*t5.*t6.*t7.*t12.*t18.*t29.*t32.*t42-M0.*t8.*t11.*t12.*t14.*t18.*t27.*t32.*t33-M0.*t8.*t11.*t12.*t14.*t18.*t30.*t32.*t33+M0.*t8.*t11.*t12.*t14.*t18.*t27.*t33.*t39-M0.*t5.*t6.*t8.*t12.*t18.*t39.*t40.*t42-M0.*t7.*t8.*t14.*t16.*t26.*t27.*t32.*t42-M0.*t7.*t11.*t14.*t16.*t26.*t27.*t37.*t39-M0.*t7.*t11.*t14.*t16.*t26.*t30.*t34.*t39-M0.*t7.*t11.*t14.*t16.*t26.*t30.*t37.*t39+M0.*t11.*t12.*t14.*t18.*t30.*t32.*t33.*t34-M0.*t6.*t8.*t12.*t18.*t30.*t33.*t36.*t42+M0.*t11.*t12.*t14.*t18.*t30.*t32.*t33.*t37-M0.*t6.*t8.*t16.*t26.*t27.*t29.*t36.*t42-M0.*t11.*t12.*t14.*t18.*t30.*t33.*t34.*t39-M0.*t6.*t7.*t16.*t26.*t30.*t32.*t34.*t42-M0.*t6.*t8.*t16.*t26.*t29.*t30.*t36.*t42+M0.*t8.*t12.*t14.*t18.*t30.*t33.*t36.*t42-M0.*t11.*t12.*t14.*t18.*t30.*t33.*t37.*t39-M0.*t6.*t7.*t16.*t26.*t30.*t32.*t37.*t42+M0.*t7.*t14.*t16.*t26.*t30.*t32.*t34.*t42-M0.*t6.*t12.*t18.*t27.*t29.*t33.*t36.*t42+M0.*t7.*t14.*t16.*t26.*t30.*t32.*t37.*t42-M0.*t6.*t16.*t26.*t29.*t30.*t32.*t37.*t42+M0.*t6.*t16.*t26.*t29.*t30.*t36.*t37.*t42-M0.*t5.*t6.*t7.*t8.*t12.*t18.*t29.*t39.*t42+M0.*t7.*t8.*t11.*t14.*t16.*t26.*t30.*t34.*t39+M0.*t7.*t8.*t11.*t14.*t16.*t26.*t30.*t37.*t39-M0.*t6.*t7.*t8.*t16.*t26.*t27.*t29.*t32.*t42+M0.*t6.*t8.*t12.*t18.*t29.*t30.*t33.*t36.*t42+M0.*t6.*t7.*t16.*t26.*t29.*t30.*t32.*t34.*t42+M0.*t6.*t7.*t16.*t26.*t29.*t30.*t32.*t37.*t42).*-1i+t24.*t46.*exp(-t25).*(M0.*t5.*t18.*t20.*t22-M0.*t5.*t18.*t22.*t36+M0.*t5.*t7.*t18.*t22.*t36-M0.*t5.*t7.*t18.*t29.*t36+M0.*t12.*t16.*t20.*t22.*t26-M0.*t12.*t16.*t20.*t26.*t29-M0.*t5.*t8.*t11.*t14.*t18.*t40+M0.*t5.*t6.*t7.*t18.*t29.*t36+M0.*t8.*t12.*t16.*t20.*t22.*t26+M0.*t6.*t12.*t16.*t20.*t26.*t29-M0.*t8.*t12.*t16.*t20.*t26.*t29-M0.*t11.*t14.*t18.*t30.*t32.*t33-M0.*t6.*t18.*t30.*t33.*t36.*t42+M0.*t14.*t18.*t30.*t33.*t36.*t42+M0.*t6.*t8.*t12.*t16.*t20.*t26.*t29-M0.*t7.*t11.*t12.*t14.*t16.*t26.*t37-M0.*t5.*t6.*t7.*t18.*t29.*t32.*t42-M0.*t8.*t11.*t14.*t18.*t30.*t33.*t39-M0.*t5.*t6.*t8.*t18.*t39.*t40.*t42+M0.*t5.*t8.*t14.*t18.*t39.*t40.*t42-M0.*t6.*t12.*t16.*t26.*t29.*t36.*t42+M0.*t11.*t14.*t18.*t30.*t32.*t33.*t34-M0.*t6.*t8.*t18.*t30.*t33.*t36.*t42+M0.*t11.*t14.*t18.*t30.*t32.*t33.*t37-M0.*t11.*t14.*t18.*t30.*t33.*t34.*t39+M0.*t8.*t14.*t18.*t30.*t33.*t36.*t42-M0.*t11.*t14.*t18.*t30.*t33.*t37.*t39+M0.*t6.*t18.*t29.*t30.*t33.*t36.*t42-M0.*t7.*t8.*t11.*t12.*t14.*t16.*t26.*t34-M0.*t7.*t8.*t11.*t12.*t14.*t16.*t26.*t37-M0.*t7.*t8.*t11.*t12.*t14.*t16.*t26.*t39+M0.*t5.*t6.*t7.*t8.*t18.*t29.*t32.*t42-M0.*t6.*t7.*t8.*t12.*t16.*t26.*t32.*t42-M0.*t5.*t6.*t7.*t8.*t18.*t29.*t39.*t42+M0.*t7.*t8.*t12.*t14.*t16.*t26.*t32.*t42-M0.*t7.*t11.*t12.*t14.*t16.*t26.*t34.*t39-M0.*t6.*t8.*t12.*t16.*t26.*t29.*t32.*t42-M0.*t6.*t7.*t12.*t16.*t26.*t32.*t34.*t42-M0.*t6.*t7.*t12.*t16.*t26.*t32.*t37.*t42+M0.*t7.*t12.*t14.*t16.*t26.*t32.*t34.*t42+M0.*t7.*t12.*t14.*t16.*t26.*t32.*t37.*t42+M0.*t5.*t6.*t8.*t18.*t29.*t39.*t40.*t42-M0.*t6.*t12.*t16.*t26.*t29.*t32.*t37.*t42+M0.*t6.*t8.*t18.*t29.*t30.*t33.*t36.*t42+M0.*t6.*t12.*t16.*t26.*t29.*t36.*t37.*t42+M0.*t7.*t8.*t11.*t12.*t14.*t16.*t26.*t34.*t39+M0.*t7.*t8.*t11.*t12.*t14.*t16.*t26.*t37.*t39+M0.*t6.*t7.*t8.*t12.*t16.*t26.*t29.*t32.*t42+M0.*t6.*t7.*t12.*t16.*t26.*t29.*t32.*t34.*t42+M0.*t6.*t7.*t12.*t16.*t26.*t29.*t32.*t37.*t42);
if nargout > 1
    t65 = T2.*TI.*4.0;
    t66 = T1.*TE;
    t67 = T2.*TE.*6.0;
    t71 = T2.*TR.*4.0;
    t68 = t65+t66+t67-t71;
    t69 = t2.*t3.*t68.*(1.0./2.0);
    t70 = exp(t69);
    t72 = T1.*TE.*3.0;
    t73 = T2.*TE.*4.0;
    t74 = T2.*TI.*2.0;
    t75 = T1.*TE.*2.0;
    t76 = T2.*TE.*3.0;
    t77 = t65+t75+t76;
    t78 = t2.*t3.*t77.*(1.0./2.0);
    t79 = exp(t78);
    t80 = TE.*5.0;
    t81 = t48-t52+t80;
    t82 = t3.*t81.*(1.0./2.0);
    t83 = exp(t82);
    t84 = TI.*4.0;
    t85 = -t52+t80+t84;
    t86 = t3.*t85.*(1.0./2.0);
    t87 = exp(t86);
    t91 = TR.*4.0;
    t88 = t80+t84-t91;
    t89 = t3.*t88.*(1.0./2.0);
    t90 = exp(t89);
    t92 = t66+t73+t74;
    t93 = t2.*t3.*t92.*(1.0./2.0);
    t94 = exp(t93);
    t95 = t65+t66+t73;
    t96 = t2.*t3.*t95.*(1.0./2.0);
    t97 = exp(t96);
    t98 = t74+t75+t76;
    t99 = t2.*t3.*t98.*(1.0./2.0);
    t100 = exp(t99);
    t101 = T2.*TE.*2.0;
    t108 = T2.*TR.*2.0;
    t102 = t65+t66+t73-t108;
    t103 = t2.*t3.*t102.*(1.0./2.0);
    t104 = exp(t103);
    t105 = t66+t74+t101-T2.*TR;
    t106 = t2.*t3.*t105;
    t107 = exp(t106);
    t109 = T2.*TE.*5.0;
    t110 = t65+t75+t76-t108;
    t111 = t2.*t3.*t110.*(1.0./2.0);
    t112 = exp(t111);
    t113 = t66+t73+t74-t108;
    t114 = t2.*t3.*t113.*(1.0./2.0);
    t115 = exp(t114);
    t116 = t65+t66-t71+t73;
    t117 = t2.*t3.*t116.*(1.0./2.0);
    t118 = exp(t117);
    t119 = t65+t66-t71+t109;
    t120 = t2.*t3.*t119.*(1.0./2.0);
    t121 = exp(t120);
    s2_TI_TE_xy = (t55.*-1i+t56.*1i-t57.*1i+t58.*1i-t59.*1i-t60.*1i+t61.*1i+t62.*1i-t63.*1i-t64.*1i+M0.*t8.*t16.*t20.*t22.*t26.*1i+M0.*t5.*t12.*t18.*t22.*t36.*1i-M0.*t8.*t16.*t20.*t26.*t29.*1i-M0.*t16.*t20.*t22.*t26.*t27.*1i-M0.*t12.*t14.*t18.*t32.*t51.*1i+M0.*t12.*t14.*t18.*t39.*t51.*1i+M0.*t6.*t8.*t16.*t20.*t26.*t29.*1i+M0.*t5.*t7.*t12.*t18.*t29.*t36.*1i-M0.*t8.*t16.*t20.*t22.*t26.*t27.*1i+M0.*t6.*t8.*t12.*t18.*t36.*t42.*1i-M0.*t7.*t8.*t14.*t16.*t26.*t51.*1i-M0.*t6.*t16.*t20.*t26.*t27.*t29.*1i+M0.*t8.*t16.*t20.*t26.*t27.*t29.*1i-M0.*t6.*t7.*t16.*t26.*t32.*t42.*1i-M0.*t8.*t12.*t14.*t18.*t36.*t42.*1i+M0.*t8.*t12.*t14.*t18.*t32.*t51.*1i+M0.*t7.*t14.*t16.*t26.*t32.*t42.*1i-M0.*t6.*t12.*t18.*t27.*t36.*t42.*1i+M0.*t12.*t14.*t18.*t27.*t36.*t42.*1i-M0.*t7.*t14.*t16.*t26.*t39.*t51.*1i-M0.*t12.*t14.*t18.*t27.*t39.*t51.*1i+M0.*t12.*t14.*t18.*t32.*t40.*t51.*1i-M0.*t12.*t14.*t18.*t39.*t40.*t51.*1i-M0.*t6.*t8.*t16.*t20.*t26.*t27.*t29.*1i+M0.*t5.*t8.*t12.*t14.*t18.*t40.*t51.*1i-M0.*t6.*t8.*t12.*t18.*t27.*t36.*t42.*1i+M0.*t7.*t8.*t14.*t16.*t26.*t27.*t51.*1i-M0.*t6.*t8.*t12.*t18.*t29.*t36.*t42.*1i+M0.*t6.*t7.*t16.*t26.*t27.*t32.*t42.*1i+M0.*t8.*t12.*t14.*t18.*t27.*t36.*t42.*1i+M0.*t6.*t7.*t16.*t26.*t29.*t32.*t42.*1i+M0.*t7.*t8.*t14.*t16.*t26.*t39.*t51.*1i-M0.*t6.*t8.*t12.*t18.*t36.*t40.*t42.*1i-M0.*t6.*t8.*t16.*t26.*t29.*t36.*t42.*1i-M0.*t7.*t14.*t16.*t26.*t27.*t32.*t42.*1i-M0.*t8.*t12.*t14.*t18.*t27.*t39.*t51.*1i+M0.*t6.*t12.*t18.*t27.*t29.*t36.*t42.*1i+M0.*t8.*t12.*t14.*t18.*t36.*t40.*t42.*1i-M0.*t8.*t12.*t14.*t18.*t32.*t40.*t51.*1i+M0.*t7.*t14.*t16.*t26.*t27.*t37.*t51.*1i+M0.*t7.*t14.*t16.*t26.*t27.*t39.*t51.*1i+M0.*t6.*t12.*t18.*t27.*t36.*t40.*t42.*1i-M0.*t6.*t16.*t26.*t29.*t32.*t37.*t42.*1i-M0.*t12.*t14.*t18.*t27.*t36.*t40.*t42.*1i+M0.*t6.*t16.*t26.*t29.*t36.*t37.*t42.*1i+M0.*t12.*t14.*t18.*t27.*t39.*t40.*t51.*1i+M0.*t5.*t6.*t7.*t12.*t18.*t29.*t32.*t42.*1i+M0.*t5.*t6.*t8.*t12.*t18.*t39.*t40.*t42.*1i-M0.*t7.*t8.*t14.*t16.*t26.*t27.*t32.*t42.*1i+M0.*t6.*t8.*t12.*t18.*t27.*t29.*t36.*t42.*1i-M0.*t6.*t7.*t16.*t26.*t27.*t29.*t32.*t42.*1i+M0.*t6.*t8.*t12.*t18.*t27.*t36.*t40.*t42.*1i+M0.*t6.*t8.*t12.*t18.*t29.*t36.*t40.*t42.*1i-M0.*t8.*t12.*t14.*t18.*t27.*t36.*t40.*t42.*1i+M0.*t8.*t12.*t14.*t18.*t27.*t39.*t40.*t51.*1i-M0.*t6.*t12.*t18.*t27.*t29.*t36.*t40.*t42.*1i+M0.*t6.*t16.*t26.*t27.*t29.*t32.*t37.*t42.*1i-M0.*t7.*t14.*t16.*t26.*t27.*t37.*t39.*t51.*1i-M0.*t6.*t16.*t26.*t27.*t29.*t36.*t37.*t42.*1i+M0.*t5.*t6.*t7.*t8.*t12.*t18.*t29.*t39.*t42.*1i-M0.*t6.*t7.*t8.*t16.*t26.*t27.*t29.*t32.*t42.*1i-M0.*t6.*t8.*t12.*t18.*t27.*t29.*t36.*t40.*t42.*1i)./(t20.*t22.*t54+t14.*t26.*t32.*t51-t14.*t26.*t27.*t32.*t51-t14.*t26.*t32.*t37.*t51-t14.*t26.*t32.*t40.*t51-t14.*t37.*t40.*t51.*t54+t14.*t26.*t27.*t32.*t37.*t51+t14.*t26.*t27.*t32.*t40.*t51+t14.*t26.*t32.*t37.*t40.*t51-t14.*t26.*t27.*t32.*t37.*t40.*t51)+(M0.*t24.*(t18.*exp(t2.*t3.*(t66+t74+t101))-t18.*t79+t7.*t18.*t79-t6.*t18.*t83+t6.*t18.*t87+t14.*t18.*t83+t12.*t16.*t94-t14.*t18.*t90-t7.*t18.*t100-t12.*t16.*t97+t6.*t12.*t16.*exp(t2.*t3.*(t65+t66+t109-T2.*TR.*2.0).*(1.0./2.0))-t6.*t8.*t18.*t83+t6.*t8.*t18.*t87+t8.*t14.*t18.*t83-t6.*t12.*t16.*t94+t8.*t12.*t16.*t94-t8.*t14.*t18.*t90+t6.*t7.*t18.*t100-t8.*t12.*t16.*t97+t6.*t18.*t27.*t83-t6.*t7.*t18.*t107-t6.*t18.*t27.*t87-t14.*t18.*t27.*t83+t6.*t18.*t40.*t83+t14.*t18.*t27.*t90-t6.*t18.*t40.*t87-t14.*t18.*t40.*t83+t14.*t18.*t40.*t90-t6.*t8.*t18.*t40.*exp(t2.*t3.*(t74+t75+t76-t108).*(1.0./2.0))-t6.*t12.*t16.*t37.*exp(t2.*t3.*(t65+t66-t108+t109).*(1.0./2.0))+t6.*t7.*t12.*t16.*exp(t2.*t3.*(t66+t73+t74-T2.*TR.*2.0).*(1.0./2.0))+t8.*t14.*t18.*t40.*exp(t2.*t3.*(t74+t75+t76-T2.*TR.*2.0).*(1.0./2.0))-t8.*t14.*t18.*t40.*exp(t2.*t3.*(t66+t74+t101-T2.*TR.*2.0))-t6.*t8.*t12.*t16.*t94+t6.*t8.*t18.*t27.*t83-t6.*t7.*t12.*t16.*t104+t6.*t7.*t8.*t18.*t107+t6.*t8.*t12.*t16.*t104-t6.*t8.*t18.*t27.*t87-t8.*t14.*t18.*t27.*t83-t6.*t7.*t8.*t18.*t112+t6.*t8.*t18.*t40.*t83+t8.*t14.*t18.*t27.*t90-t6.*t8.*t18.*t40.*t87-t8.*t14.*t18.*t40.*t83-t7.*t12.*t14.*t16.*t115+t7.*t12.*t14.*t16.*t121+t8.*t14.*t18.*t40.*t90-t6.*t18.*t27.*t40.*t83+t6.*t12.*t16.*t37.*t104+t6.*t18.*t27.*t40.*t87+t14.*t18.*t27.*t40.*t83+t6.*t8.*t18.*t40.*t112-t14.*t18.*t27.*t40.*t90-t6.*t7.*t8.*t12.*t16.*t104+t6.*t7.*t8.*t12.*t16.*t115-t7.*t8.*t12.*t14.*t16.*t115+t7.*t8.*t12.*t14.*t16.*t118-t6.*t8.*t18.*t27.*t40.*t83+t6.*t8.*t18.*t27.*t40.*t87+t8.*t14.*t18.*t27.*t40.*t83-t8.*t14.*t18.*t27.*t40.*t90+t7.*t12.*t14.*t16.*t37.*t118-t7.*t12.*t14.*t16.*t37.*t121))./(exp(t2.*t3.*(t65+t72+t73).*(1.0./2.0))+t14.*t70-t14.*t27.*t70-t14.*t37.*t70-t14.*t40.*t70+t14.*t27.*t37.*t70+t14.*t27.*t40.*t70+t14.*t37.*t40.*t70-t14.*t37.*t40.*exp(t2.*t3.*(t65-t71+t72+t73).*(1.0./2.0))-t14.*t27.*t37.*t40.*t70);
end
